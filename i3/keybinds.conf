# Keybinds
# _  __          _
#| |/ /___ _ __ | | ___ _ __
#| ' // _ \ '_ \| |/ _ \ '__|
#| . \  __/ |_) | |  __/ |
#|_|\_\___| .__/|_|\___|_|
#         |_|
#
# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $alt Mod1
set $numlock Mod2

# emulates alt tab on windows with rofi
bindsym $alt+Tab exec --no-startup-id rofi -show window

# menu to shutdown restart logout etc
bindsym $mod+BackSpace exec --no-startup-id $i3-script-path/rofi/sys-options.sh

# use pactl to adjust volume in PulseAudio.
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%

# spoitfy audio control
bindsym Shift+XF86AudioRaiseVolume exec --no-startup-id "playerctl -p spotify,ncspot volume 0.05+" 
bindsym Shift+XF86AudioLowerVolume exec --no-startup-id "playerctl -p spotify,ncspot volume 0.05-"
bindsym XF86AudioPlay              exec --no-startup-id "playerctl -p spotify,ncspot play-pause"
bindsym XF86AudioStop              exec --no-startup-id "playerctl -p spotify,ncspot stop"
bindsym XF86AudioNext              exec --no-startup-id "playerctl -p spotify,ncspot next"
bindsym XF86AudioPrev              exec --no-startup-id "playerctl -p spotify,ncspot previous"

# browser audio control
bindsym $alt+XF86AudioPlay         exec --no-startup-id "playerctl -i spotify,ncspot play-pause"
bindsym $alt+XF86AudioStop         exec --no-startup-id "playerctl -i spotify,ncspot stop"
bindsym $alt+XF86AudioNext         exec --no-startup-id "playerctl -i spotify,ncspot next"
bindsym $alt+XF86AudioPrev         exec --no-startup-id "playerctl -i spotify,ncspot previous"

bindsym $mod+$alt+m exec --no-startup-id playerctl -a play-pause

# show scratchpad
bindsym $mod+equal scratchpad show

# add to scratchpad
bindsym $mod+Shift+equal move scratchpad

# toggle polybar
bindsym $mod+h exec --no-startup-id polybar-msg cmd toggle

# refresh polybar
bindsym $mod+Shift+h exec --no-startup-id polybar-msg cmd restart 

# toggle gaps
bindsym $mod+g gaps inner all toggle $gap_width

# manually edit inner gaps
bindsym $mod+$alt+Up   gaps inner all plus 2
bindsym $mod+$alt+Down gaps inner all minus 2

# toggle rounded corners (and xborders)
bindsym $mod+r exec --no-startup-id $i3-script-path/toggle-rouded-corners.sh 

# start a terminal
bindsym $mod+Return exec --no-startup-id alacritty

# start a terminal logged into root
bindsym $mod+$alt+Return exec --no-startup-id alacritty -e su

# fast binding for firefox
bindsym $mod+numbersign exec --no-startup-id $BROWSER
bindsym $mod+$alt+numbersign exec --no-startup-id $BROWSER --private-window
bindsym $mod+Shift+numbersign exec --no-startup-id $BROWSER --kiosk

# F keys
bindsym $mod+F1  exec --no-startup-id thunar
bindsym $mod+F2  exec --no-startup-id steam
bindsym $mod+F3  exec --no-startup-id lutris
bindsym $mod+F4  exec --no-startup-id discord
bindsym $mod+F5  exec --no-startup-id alacritty -e btop
bindsym $mod+F6  exec --no-startup-id alacritty -e nvim -c Nvdash
bindsym $mod+F7  exec --no-startup-id alacritty -e ranger
bindsym $mod+F8  exec --no-startup-id alacritty -e bash -c "i3-msg floating toggle && clear && qalc"
bindsym $mod+F11 exec --no-startup-id spotify-launcher
bindsym $mod+F12 exec --no-startup-id pavucontrol

# kill focused window
bindsym $mod+q kill

# force kill window
bindsym --release $mod+Shift+q exec --no-startup-id xdotool getactivewindow windowkill

# kill window with mouse
bindsym --whole-window $mod+button2 kill

# start rofi for launching main programs
bindsym $mod+grave exec --no-startup-id rofi -show drun

# start rofi for launching all programs
bindsym $mod+Tab exec --no-startup-id rofi -show run

# rofi change theme script
bindsym $mod+t exec --no-startup-id $i3-script-path/rofi/change-theme.sh

# alternatively, you can use the cursor keys:
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# toggle orientation
bindsym $mod+slash split toggle

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# fullscreen container acros all monitors
bindsym $mod+Shift+f fullscreen toggle global

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+c focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1  1
set $ws2  2
set $ws3  3
set $ws4  4
set $ws5  5
set $ws6  6
set $ws7  7
set $ws8  8
set $ws9  9
set $ws10 10

# switch to workspace with manual entry
bindsym $mod+minus                      exec --no-startup-id $i3-script-path/rofi/workspace.sh --move
bindsym $mod+Shift+minus                exec --no-startup-id $i3-script-path/rofi/workspace.sh --move-container  
bindsym $mod+$numlock+KP_Subtract       exec --no-startup-id $i3-script-path/rofi/workspace.sh --move
bindsym $mod+Shift+$numlock+KP_Subtract exec --no-startup-id $i3-script-path/rofi/workspace.sh --move-container

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# numpad focus
bindsym $mod+$numlock+KP_1 workspace number $ws1
bindsym $mod+$numlock+KP_2 workspace number $ws2
bindsym $mod+$numlock+KP_3 workspace number $ws3
bindsym $mod+$numlock+KP_4 workspace number $ws4
bindsym $mod+$numlock+KP_5 workspace number $ws5
bindsym $mod+$numlock+KP_6 workspace number $ws6
bindsym $mod+$numlock+KP_7 workspace number $ws7
bindsym $mod+$numlock+KP_8 workspace number $ws8
bindsym $mod+$numlock+KP_9 workspace number $ws9
bindsym $mod+$numlock+KP_0 workspace number $ws10

# move focused container to workspace and follow the container
bindsym $mod+Shift+1 move container to workspace number $ws1;  workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2;  workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3;  workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4;  workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5;  workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6;  workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7;  workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8;  workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9;  workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10; workspace number $ws10

# scuffed way to use numpad to move windows
bindsym $mod+Shift+$numlock+KP_End     move container to workspace number $ws1;  workspace number $ws1
bindsym $mod+Shift+$numlock+KP_Down    move container to workspace number $ws2;  workspace number $ws2
bindsym $mod+Shift+$numlock+KP_Next    move container to workspace number $ws3;  workspace number $ws3
bindsym $mod+Shift+$numlock+KP_Left    move container to workspace number $ws4;  workspace number $ws4
bindsym $mod+Shift+$numlock+KP_Begin   move container to workspace number $ws5;  workspace number $ws5
bindsym $mod+Shift+$numlock+KP_Right   move container to workspace number $ws6;  workspace number $ws6
bindsym $mod+Shift+$numlock+KP_Home    move container to workspace number $ws7;  workspace number $ws7
bindsym $mod+Shift+$numlock+KP_Up      move container to workspace number $ws8;  workspace number $ws8
bindsym $mod+Shift+$numlock+KP_Prior   move container to workspace number $ws9;  workspace number $ws9
bindsym $mod+Shift+$numlock+KP_Insert  move container to workspace number $ws10; workspace number $ws10

# swap workspaces
bindsym $mod+Shift+$alt+1  exec --no-startup-id $i3-script-path/swap-workspaces.sh 1
bindsym $mod+Shift+$alt+2  exec --no-startup-id $i3-script-path/swap-workspaces.sh 2
bindsym $mod+Shift+$alt+3  exec --no-startup-id $i3-script-path/swap-workspaces.sh 3
bindsym $mod+Shift+$alt+4  exec --no-startup-id $i3-script-path/swap-workspaces.sh 4
bindsym $mod+Shift+$alt+5  exec --no-startup-id $i3-script-path/swap-workspaces.sh 5
bindsym $mod+Shift+$alt+6  exec --no-startup-id $i3-script-path/swap-workspaces.sh 6
bindsym $mod+Shift+$alt+7  exec --no-startup-id $i3-script-path/swap-workspaces.sh 7
bindsym $mod+Shift+$alt+8  exec --no-startup-id $i3-script-path/swap-workspaces.sh 8
bindsym $mod+Shift+$alt+9  exec --no-startup-id $i3-script-path/swap-workspaces.sh 9
bindsym $mod+Shift+$alt+10 exec --no-startup-id $i3-script-path/swap-workspaces.sh 10

# swap workspaces with numpad 
bindsym $mod+Shift+$alt+$numlock+KP_End    exec --no-startup-id $i3-script-path/swap-workspaces.sh 1
bindsym $mod+Shift+$alt+$numlock+KP_Down   exec --no-startup-id $i3-script-path/swap-workspaces.sh 2
bindsym $mod+Shift+$alt+$numlock+KP_Next   exec --no-startup-id $i3-script-path/swap-workspaces.sh 3
bindsym $mod+Shift+$alt+$numlock+KP_Left   exec --no-startup-id $i3-script-path/swap-workspaces.sh 4
bindsym $mod+Shift+$alt+$numlock+KP_Begin  exec --no-startup-id $i3-script-path/swap-workspaces.sh 5
bindsym $mod+Shift+$alt+$numlock+KP_Right  exec --no-startup-id $i3-script-path/swap-workspaces.sh 6
bindsym $mod+Shift+$alt+$numlock+KP_Home   exec --no-startup-id $i3-script-path/swap-workspaces.sh 7
bindsym $mod+Shift+$alt+$numlock+KP_Up     exec --no-startup-id $i3-script-path/swap-workspaces.sh 8
bindsym $mod+Shift+$alt+$numlock+KP_Prior  exec --no-startup-id $i3-script-path/swap-workspaces.sh 9
bindsym $mod+Shift+$alt+$numlock+KP_Insert exec --no-startup-id $i3-script-path/swap-workspaces.sh 10

bindsym $mod+Shift+$alt+Right exec $i3-script-path/rotate-workspaces.sh
bindsym $mod+Shift+$alt+Left  exec $i3-script-path/rotate-workspaces-reverse.sh

# move between workspace list
bindsym $mod+Control+Left workspace prev
bindsym $mod+Control+Right workspace next

# Clipboard Screenshots BROKEN
#bindsym Print exec --no-startup-id maim | xclip -selection clipboard -t image/png
#bindsym $mod+Print exec --no-startup-id maim --window $(xdotool getactivewindow) | xclip -selection clipboard -t image/png
#bindsym $mod+Shift+s exec --no-startup-id maim --select | xclip -selection clipboard -t image/png

# Saved screenshots
bindsym --release $mod+Print exec --no-startup-id import ~/pictures/screenshots/$(date +%s).png

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# lock i3
bindsym $mod+l exec --no-startup-id i3lock -ef -c 000000
#bindsym $mod+l exec --no-startup-id i3lock -eft --image="$HOME/pictures/wallpapers/skull-jap.png"

# resize current window
bindsym $alt+Left resize shrink width 5 px or 5 ppt
bindsym $alt+Down resize grow height 5 px or 5 ppt
bindsym $alt+Up resize shrink height 5 px or 5 ppt
bindsym $alt+Right resize grow width 5 px or 5 ppt

# bindings set on mouse drivers to keys F13 -> F17
set $mouse-extra1 XF86Tools
set $mouse-extra2 XF86Launch5
set $mouse-extra3 XF86Launch6
set $mouse-extra4 XF86Launch7
set $mouse-extra5 XF86Launch8

bindsym $mouse-extra1 fullscreen toggle
bindsym $mouse-extra2 floating toggle

floating_modifier $mod

# shutdown
bindsym Control+$alt+Shift+BackSpace exec poweroff 

# reboot
bindsym Control+$alt+Shift+Return exec reboot

# VI modes

bindsym $mod+v mode "normal"

mode "normal" {
  bindsym Escape mode default
  bindsym i      mode default
  bindsym a      mode default

  bindsym Return          exec --no-startup-id alacritty
  bindsym numbersign      exec --no-startup-id firefox
  bindsym slash           exec --no-startup-id "rofi -show window"; mode default
  bindsym Shift+semicolon exec --no-startup-id "alacritty"; mode default

  bindsym x kill

  bindsym h focus left
  bindsym j focus down
  bindsym k focus up
  bindsym l focus right

  bindsym Left  focus left
  bindsym Down  focus down
  bindsym Up    focus up
  bindsym Right focus right

  bindsym Shift+h move left
  bindsym Shift+j move down
  bindsym Shift+k move up
  bindsym Shift+l move right

  bindsym Shift+Left  move left
  bindsym Shift+Down  move down
  bindsym Shift+Up    move up
  bindsym Shift+Right move right
}
